<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrolling Webpage with GSAP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/TextPlugin.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        .section {
            min-height: 100vh;
            padding: 2rem;
            box-sizing: border-box;
        }
        #section1, #section3 {
            background-color: #f0f0f0;
        }
        #section2 {
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .text-content {
            width: 45%;
        }
        .phone-container {
            width: 45%;
            height: 600px;
            position: fixed;
            right: 2rem;
            bottom: -300px;
            transition: bottom 0.5s ease;
        }
        .phone-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .phone-screen.active {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="section" id="section1">
        <h2>Section 1</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
        <p>Praesent euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
        <p>Donec euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
    </div>

    <div class="section" id="section2">
        <div class="text-content">
            <h2 id="screen-title">Screen 1 Title</h2>
            <p id="screen-description">Description for Screen 1</p>
        </div>
        <div class="phone-container">
            <img src="phone1.png" alt="Phone 1" class="phone-screen active" data-screen="1">
            <img src="phone2.png" alt="Phone 2" class="phone-screen" data-screen="2">
            <img src="phone3.png" alt="Phone 3" class="phone-screen" data-screen="3">
        </div>
    </div>

    <div class="section" id="section3">
        <h2>Section 3</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
        <p>Praesent euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
        <p>Donec euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc. Sed euismod, nunc id aliquam tincidunt, nisi nunc tincidunt nunc, nec tincidunt nunc nunc id nunc.</p>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger, TextPlugin);

        const screenContent = [
            { title: "Screen 1 Title", description: "Description for Screen 1" },
            { title: "Screen 2 Title", description: "Description for Screen 2" },
            { title: "Screen 3 Title", description: "Description for Screen 3" }
        ];

        function updateContent(index) {
            gsap.to('#screen-title', { duration: 0.5, text: screenContent[index].title });
            gsap.to('#screen-description', { duration: 0.5, text: screenContent[index].description });
        }

        function updatePhoneScreen(index) {
            const screens = document.querySelectorAll('.phone-screen');
            screens.forEach((screen, i) => {
                if (i === index) {
                    gsap.to(screen, { duration: 0.5, opacity: 1 });
                } else {
                    gsap.to(screen, { duration: 0.5, opacity: 0 });
                }
            });
        }

        // Animate phone container from section 1 to section 2 and back
        gsap.timeline({
            scrollTrigger: {
                trigger: "#section1",
                start: "top top",
                end: "bottom top",
                scrub: true,
                toggleActions: "play none none reverse"
            }
        })
        .fromTo(".phone-container", 
            { bottom: -300 }, 
            { bottom: 0, ease: "none" }
        );

        // Pin section2 and create animations
        const section2Timeline = gsap.timeline({
            scrollTrigger: {
                trigger: "#section2",
                pin: true,
                start: "top top",
                end: "+=200%",
                scrub: 1,
                onUpdate: (self) => {
                    const progress = self.progress;
                    const index = Math.floor(progress * 3);
                    updateContent(Math.min(index, 2));
                    updatePhoneScreen(Math.min(index, 2));
                }
            }
        });

        // Create snap points for main sections
        gsap.utils.toArray(".section").forEach((section, i) => {
            ScrollTrigger.create({
                trigger: section,
                start: "top top",
                end: "bottom top",
                onEnter: () => {
                    gsap.to(window, {
                        duration: 0.5,
                        scrollTo: { y: section.offsetTop, autoKill: false },
                        overwrite: true
                    });
                },
                onEnterBack: () => {
                    gsap.to(window, {
                        duration: 0.5,
                        scrollTo: { y: section.offsetTop, autoKill: false },
                        overwrite: true
                    });
                }
            });
        });

        // Ensure the page starts at the top
        window.onload = () => {
            window.scrollTo(0, 0);
        };
    </script>
</body>
</html>
